package com.epam.jmp.classloader;

import java.lang.reflect.Field;
import java.lang.reflect.Modifier;

public class ClassUtils {
	
	public static void main(String[] args) throws Exception {
		ClassLoader classloader = new StatelessClassLoader("src/test/resources/stateless-classloader-test-data.jar");
		Class<?> random = classloader.loadClass("com.epam.jmp.classloader.test.RandomUtils");
		int r = (Integer)random.getMethod("nextInt").invoke(null);
		System.out.println(r);
	}
	
	public static boolean isStateless(Class<?> clazz) {
		for(Field field : clazz.getDeclaredFields()) {
			int fieldModifiers = field.getModifiers();
			boolean isFinal = (fieldModifiers & Modifier.FINAL) != 0;
			boolean isStatic = (fieldModifiers & Modifier.STATIC) != 0;
			if(!isStatic && !isFinal) {
				return false;
			}
		}
		return true;
	}
	
}
